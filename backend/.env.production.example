# ========================================
# FairWorkers Backend - Production Environment
# ========================================
#
# IMPORTANT SECURITY NOTES:
# 1. Generate strong random secrets for all *_SECRET variables
# 2. Never commit actual .env.production file to version control
# 3. Use a password manager or secrets management service
# 4. Rotate secrets periodically (at least every 90 days)
# 5. Use environment variables or secret managers in production
#
# To generate secure secrets, use:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# ========================================

# ========================================
# SERVER CONFIGURATION (REQUIRED)
# ========================================
NODE_ENV=production
PORT=3000

# Public URLs - Update with your production domains
API_URL=https://api.fairworkers.com
FRONTEND_URL=https://fairworkers.com

# ========================================
# DATABASE CONFIGURATION (REQUIRED)
# ========================================
# PostgreSQL Connection
# Recommended: Use managed PostgreSQL (Supabase, Railway, Neon, RDS, etc.)
DB_HOST=your-postgres-host.example.com
DB_PORT=5432
DB_NAME=fairworkers_production
DB_USER=fairworkers_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_NOW

# SSL/TLS for database connection (recommended for production)
DB_SSL=true

# Alternative: Use DATABASE_URL (format: postgresql://user:password@host:port/database)
# DATABASE_URL=postgresql://fairworkers_user:password@host:5432/fairworkers_production?sslmode=require

# ========================================
# JWT AUTHENTICATION (REQUIRED)
# ========================================
# Generate new secrets for production - DO NOT use example values!
JWT_SECRET=CHANGE_THIS_GENERATE_64_BYTE_SECRET
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=CHANGE_THIS_GENERATE_DIFFERENT_64_BYTE_SECRET
JWT_REFRESH_EXPIRES_IN=30d

# ========================================
# SESSION CONFIGURATION (REQUIRED)
# ========================================
SESSION_SECRET=CHANGE_THIS_GENERATE_64_BYTE_SESSION_SECRET
SESSION_MAX_AGE=86400000

# ========================================
# PASSWORD HASHING (REQUIRED)
# ========================================
# Recommended: 12-14 for production (higher = more secure but slower)
BCRYPT_ROUNDS=12

# ========================================
# CORS CONFIGURATION (REQUIRED)
# ========================================
# Comma-separated list of allowed origins (no spaces)
# Include all your frontend domains
CORS_ORIGINS=https://fairworkers.com,https://www.fairworkers.com,https://app.fairworkers.com

# ========================================
# RATE LIMITING (RECOMMENDED)
# ========================================
# 15 minutes window
RATE_LIMIT_WINDOW_MS=900000
# Max 100 requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ========================================
# PAYMENT INTEGRATION (REQUIRED for payments)
# ========================================
# Stripe - Get from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_live_YOUR_LIVE_SECRET_KEY
STRIPE_PUBLIC_KEY=pk_live_YOUR_LIVE_PUBLIC_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET
STRIPE_CURRENCY=CZK

# CCBill Configuration (if using CCBill instead of Stripe)
# CCBILL_ACCOUNT_NUMBER=your_account_number
# CCBILL_SUB_ACCOUNT=your_sub_account
# CCBILL_FLEXFORMS_ID=your_flexforms_id
# CCBILL_SALT=your_salt_key

# ========================================
# EMAIL SERVICE (REQUIRED for notifications)
# ========================================
# Option 1: SMTP (Gmail, SendGrid, Mailgun, etc.)
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=apikey
EMAIL_PASSWORD=YOUR_SENDGRID_API_KEY
EMAIL_FROM=noreply@fairworkers.com

# Option 2: AWS SES
# EMAIL_SERVICE=ses
# AWS_SES_REGION=eu-central-1
# AWS_SES_ACCESS_KEY=YOUR_AWS_ACCESS_KEY
# AWS_SES_SECRET_KEY=YOUR_AWS_SECRET_KEY

# ========================================
# SMS SERVICE (REQUIRED for safety features)
# ========================================
# Twilio - Get from https://console.twilio.com
TWILIO_ACCOUNT_SID=YOUR_TWILIO_ACCOUNT_SID
TWILIO_AUTH_TOKEN=YOUR_TWILIO_AUTH_TOKEN
TWILIO_PHONE_NUMBER=+420XXXXXXXXX

# ========================================
# FILE STORAGE (REQUIRED)
# ========================================
# Local storage (not recommended for production scaling)
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,video/mp4,video/webm

# Production File Storage - Choose ONE option:

# Option 1: AWS S3 (Recommended)
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_REGION=eu-central-1
AWS_S3_BUCKET=fairworkers-production-uploads

# Option 2: Cloudinary
# CLOUDINARY_CLOUD_NAME=your_cloud_name
# CLOUDINARY_API_KEY=your_api_key
# CLOUDINARY_API_SECRET=your_api_secret

# Option 3: DigitalOcean Spaces
# DO_SPACES_ENDPOINT=https://fra1.digitaloceanspaces.com
# DO_SPACES_KEY=YOUR_SPACES_KEY
# DO_SPACES_SECRET=YOUR_SPACES_SECRET
# DO_SPACES_BUCKET=fairworkers-uploads

# ========================================
# REDIS (HIGHLY RECOMMENDED for production)
# ========================================
# Redis is used for:
# - Socket.IO adapter (horizontal scaling)
# - Session storage (optional)
# - Caching (future feature)
#
# Managed Redis providers: Upstash, Redis Cloud, AWS ElastiCache, etc.
REDIS_URL=redis://default:PASSWORD@your-redis-host.com:6379

# If using Redis with TLS:
# REDIS_URL=rediss://default:PASSWORD@your-redis-host.com:6380

# ========================================
# SOCKET.IO CONFIGURATION (REQUIRED)
# ========================================
SOCKET_IO_CORS_ORIGIN=https://fairworkers.com,https://www.fairworkers.com

# ========================================
# PLATFORM BUSINESS SETTINGS (REQUIRED)
# ========================================
# Commission rate (0.15 = 15%)
PLATFORM_COMMISSION_RATE=0.15

# Minimum payout amount in CZK
MINIMUM_PAYOUT_AMOUNT=500

# Payout schedule in days
PAYOUT_SCHEDULE_DAYS=7

# Solidarity fund contribution (0.005 = 0.5%)
SOLIDARITY_FUND_RATE=0.005

# Instant payout fee (0.02 = 2%)
INSTANT_PAYOUT_FEE=0.02

# Bonus tiers
BONUS_TIER_1_THRESHOLD=5000
BONUS_TIER_1_RATE=0.02
BONUS_TIER_2_THRESHOLD=20000
BONUS_TIER_2_RATE=0.05

# ========================================
# SECURITY & SAFETY SETTINGS (REQUIRED)
# ========================================
# Safety check interval in minutes
SAFETY_CHECK_INTERVAL_MINUTES=60

# Enable panic button feature
PANIC_BUTTON_ENABLED=true

# Emergency contact numbers (comma-separated)
EMERGENCY_CONTACTS=112,158

# Content Security Policy (CSP) - automatically configured in server.js
# No configuration needed here

# ========================================
# LOGGING & MONITORING (RECOMMENDED)
# ========================================
# Log level: error, warn, info, debug
LOG_LEVEL=warn
LOG_FILE=./logs/production.log

# Optional: External logging service
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# LOGTAIL_SOURCE_TOKEN=your_logtail_token

# ========================================
# FEATURE FLAGS (OPTIONAL)
# ========================================
FEATURE_COMMUNITY_ENABLED=true
FEATURE_MOBILE_APP_ENABLED=true
FEATURE_VIDEO_VERIFICATION=true

# ========================================
# DATABASE BACKUP (RECOMMENDED)
# ========================================
# Configure automated backups through your database provider
# Examples:
# - Supabase: Built-in daily backups
# - Railway: Point-in-time recovery
# - AWS RDS: Automated snapshots
# - Self-hosted: pg_dump cron jobs

# Backup retention days (if self-managing)
# BACKUP_RETENTION_DAYS=30

# ========================================
# SSL/TLS CERTIFICATES (REQUIRED)
# ========================================
# For production, use a reverse proxy (nginx, Caddy) or cloud provider (Cloudflare, AWS ALB)
# to handle SSL/TLS termination
#
# If managing SSL in Node.js directly:
# SSL_CERT_PATH=/path/to/cert.pem
# SSL_KEY_PATH=/path/to/key.pem
# SSL_CA_PATH=/path/to/ca.pem

# ========================================
# HEALTH CHECKS & MONITORING (RECOMMENDED)
# ========================================
# Health check endpoint is available at /health
# Configure your load balancer or monitoring service to check:
# GET https://api.fairworkers.com/health

# Uptime monitoring services: UptimeRobot, Pingdom, StatusCake, etc.

# ========================================
# DEPLOYMENT CHECKLIST
# ========================================
# Before going live, ensure:
# [ ] All *_SECRET variables have unique, strong random values
# [ ] Database backups are configured and tested
# [ ] SSL/TLS certificates are valid and auto-renewing
# [ ] CORS_ORIGINS includes all production domains
# [ ] Email service is configured and tested
# [ ] SMS service is configured and tested (for safety features)
# [ ] Payment integration is in LIVE mode with real credentials
# [ ] Redis is configured for Socket.IO scaling
# [ ] File storage is configured (S3/Cloudinary)
# [ ] Monitoring and logging are set up
# [ ] Rate limiting is appropriate for your expected traffic
# [ ] Emergency contacts are correct and tested
# [ ] Domain DNS is properly configured
# [ ] CDN is configured (Cloudflare, etc.)
# [ ] Database connection pool settings are optimized
# [ ] Environment variables are set in your hosting platform
# ========================================
